<div class="details">
  <h2><%= @food.name %></h2>

  <% if @food.photo.attached? %>
    <%= cl_image_tag(@food.photo.key) %>
  <% else %>
    <%= image_tag("default-img.png") %>
  <% end %>

  <h3>Recette</h3>
  <p><%= @food.recipe %></p>
</div>

<div class="new-rating">
  <%= simple_form_for [@food, @rating] do |f| %>
    <%= f.input :score, as: :radio_buttons,
      collection: [["1", 1, { class: "one-star" }],
      ['2', 2, { class: "two-stars" }],
      ["3", 3, { class:"three-stars" } ],
      ["4", 4, { class:"four-stars" } ],
      ["5", 5, { class:"five-stars" } ],] %>
    <%= f.input :score, as: :float, label: "Votre note de 0 à 5", step: "0.5", html5: true %>
    <%= f.input :comment, label: "Donnez votre avis", html5: true %>
    <%#= f.input :comment, label: "Votre avis", as: :rich_text_area, html5: true %>
    <%= f.submit "Publier", class: "btn btn-primary" %>
  <% end %>
</div>

<!-- ADDITIONNAL CONTENT -->
<div class="display-ratings">
  <h2>Note : <%= @avg_score %></h2>
  <% @food.ratings.each do |rating| %>
    <div class="card">
      <span>
        <i class="fas fa-quote-left" aria-hidden="true"></i>
        <%= rating.comment %>
        <i class="fas fa-quote-right" aria-hidden="true"></i>
      </span>
      [<%= rating.score  %>/5]
      <%= rating.user.email %>
    </div>
  <% end %>


</div>

<button type="button" class="btn-modal-new-rating" data-bs-toggle="modal" data-bs-target="#myModal">
  Noter cette recette
</button>

 <!-- Modal -->
  <div class="modal" id="myModal">
    <div class="modal-dialog">
      <div class="modal-content">
        <!-- Modal Header -->
        <div class="modal-header">
          <h4 class="modal-title">Ajoutez un commentaire et une note à cette recette</h4>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <!-- Modal body -->
        <div class="modal-body">
          <div class="new-rating">
            <%= simple_form_for [@food, @rating] do |f| %>
              <%= f.input :score, as: :radio_buttons,
                collection: [["1", 1, { class: "one-star" }],
                ['2', 2, { class: "two-stars" }],
                ["3", 3, { class:"three-stars" } ],
                ["4", 4, { class:"four-stars" } ],
                ["5", 5, { class:"five-stars" } ],] %>
              <%#= f.input :score, label: "Votre note de 0 à 5", step: "1", html5: true %>
              <%= f.input :comment, label: "Donnez votre avis", as: :text, autofocus: true,
                    :input_html => {rows: 5 }, html5: true %>
              <%#= f.input :comment, label: "Votre avis", as: :rich_text_area, html5: true %>
              <%= f.submit "Publier", class: "btn btn-primary" %>
            <% end %>
          </div>
        </div>
        <!-- Modal footer -->
        <div class="modal-footer">
          <button type="button" class="btn-close-modal" data-bs-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>
 <!-- Fin Modal -->
